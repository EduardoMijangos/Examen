<div class="card p-4 shadow-sm">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <h3 class="mb-0">
        {{ dependencia?.id ? 'Editar Dependencia' : 'Nueva Dependencia' }}
      </h3>
      <small class="text-muted">
        Completa los campos para guardar la información
      </small>
    </div>

    <button class="btn btn-outline-secondary" routerLink="/dependencias">
      ← Volver
    </button>
  </div>

  <form #form="ngForm" (ngSubmit)="guardar(form)" novalidate>

    <!-- Nombre -->
    <div class="form-group">
      <label>Nombre</label>
      <input 
        type="text" 
        [(ngModel)]="dependencia.nombre"
        name="nombre"
        required minlength="3"
        #nombre="ngModel"
        class="input"
        placeholder="Ej: Secretaría de Finanzas"
      >
      <div *ngIf="nombre.invalid && nombre.touched" class="error-msg">
        El nombre es obligatorio y mínimo 3 caracteres.
      </div>
    </div>

    <!-- Dirección -->
    <div class="form-group">
      <label>Dirección</label>
      <input 
        type="text"
        [(ngModel)]="dependencia.direccion"
        name="direccion"
        required
        #direccion="ngModel"
        class="input"
        placeholder="Ej: Calle Reforma #123"
      >
      <div *ngIf="direccion.invalid && direccion.touched" class="error-msg">
        La dirección es obligatoria.
      </div>
    </div>

    <!-- Teléfono -->
    <div class="form-group">
      <label>Teléfono</label>
      <input
        type="text"
        [(ngModel)]="dependencia.telefono"
        name="telefono"
        required pattern="\d{10}"
        maxlength="10"
        #telefono="ngModel"
        class="input"
        placeholder="10 dígitos"
      >
      <div *ngIf="telefono.invalid && telefono.touched" class="error-msg">
        Debe contener exactamente 10 dígitos.
      </div>
    </div>

    <!-- Correo -->
    <div class="form-group">
      <label>Correo</label>
      <input 
        type="email"
        [(ngModel)]="dependencia.correo"
        name="correo"
        required email
        #correo="ngModel"
        class="input"
        placeholder="correo@dominio.com"
      >
      <div *ngIf="correo.invalid && correo.touched" class="error-msg">
        Ingrese un correo válido.
      </div>
    </div>

    <!-- Activo -->
    <div class="form-group checkbox-group">
      <input 
        type="checkbox"
        [(ngModel)]="dependencia.activo"
        name="activo"
      >
      <label>Activo</label>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="form.invalid || cargando">
      {{ dependencia.id ? 'Actualizar' : 'Registrar' }}
    </button>

  </form>

</div>
